

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fast Speech &mdash; nemo 0.11.0b9 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NeMo Collections API" href="../collections/modules.html" />
    <link rel="prev" title="Waveglow" href="waveglow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> nemo
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0b9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/intro.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training.html">Fast Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asr/intro.html">Speech Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speaker_recognition/intro.html">Speaker Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech_command/intro.html">Speech Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../voice_activity_detection/intro.html">Voice Activity Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/intro.html">Natural Language Processing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Speech Synthesis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html">Datasets</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="models.html">Models</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tacotron2.html">Tacotron 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="waveglow.html">Waveglow</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Fast Speech</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#model">Model</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../collections/modules.html">NeMo Collections API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-docs/modules.html">NeMo API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chinese/intro.html">中文支持</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">nemo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="intro.html">Speech Synthesis</a> &raquo;</li>
        
          <li><a href="models.html">Models</a> &raquo;</li>
        
      <li>Fast Speech</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tts/fastspeech.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fast-speech">
<span id="fastspeech"></span><h1>Fast Speech<a class="headerlink" href="#fast-speech" title="Permalink to this headline">¶</a></h1>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>This model is based on the
<a class="reference external" href="https://www.microsoft.com/en-us/research/blog/fastspeech-new-text-to-speech-model-improves-on-speed-accuracy-and-controllability">Fast Speech model</a>
(see also <a class="reference external" href="https://arxiv.org/abs/1905.09263">paper</a>).</p>
<p>Fast Speech operates within two distinct stages: durations extraction and actual training.</p>
<div class="section" id="durations-extraction">
<h3>Durations Extraction<a class="headerlink" href="#durations-extraction" title="Permalink to this headline">¶</a></h3>
<p>First, for each input dataset char, you should obtain duration integer, which corresponds to the number of steps this
char lasts in audio sample. For that, NeMo uses alignment map from Tacotron 2 inference teacher forced with ground
truth mel spectrogram for shape matching. For each timestep, we add +1 duration to char with strongest alignment signal
in alignment map.</p>
<p>To do that, run fastspeech_durations.py from NeMo/examples/tts with following arguments (provide path to durations
dir to save):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python fastspeech_durations.py --spec_model<span class="o">=</span>tacotron2 --spec_model_config<span class="o">=</span>configs/tacotron2.yaml --spec_model_load_dir<span class="o">=</span>&lt;directory_with_tacotron2_checkopints&gt; --eval_dataset<span class="o">=</span>&lt;data_root&gt;/ljspeech_train.json --durations_dir<span class="o">=</span>&lt;data_root&gt;/durs
</pre></div>
</div>
</div>
<div class="section" id="fast-speech-training">
<h3>Fast Speech Training<a class="headerlink" href="#fast-speech-training" title="Permalink to this headline">¶</a></h3>
<p>Second stage is actual model training. NeMo wrap all fast speech mel generation and durations calculation logic in one
neural model with corresponded name. FastSpeechLoss, then uses its output to calculate two term loss value.</p>
<p>To begin training with librispeech data durations obtained from previous step, run this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python fastspeech.py --model_config<span class="o">=</span>configs/fastspeech.yaml --train_dataset<span class="o">=</span>&lt;data_root&gt;/ljspeech_train.json --durations_dir<span class="o">=</span>&lt;data_root&gt;/durs
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../collections/modules.html" class="btn btn-neutral float-right" title="NeMo Collections API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="waveglow.html" class="btn btn-neutral float-left" title="Waveglow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018-2020, NVIDIA

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>